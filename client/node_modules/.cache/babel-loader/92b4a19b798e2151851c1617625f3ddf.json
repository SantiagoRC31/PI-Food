{"ast":null,"code":"import { FILTER_BY_TYPEDIET, GET_BY_ID, GET_BY_NAME, GET_TYPE_DIETS, GET_USER, HANDLE_NUMBER, ORDER, ORDER_BY_PUNTUATION, ORDER_BY_SOURCE, PAGINATE } from \"../action/action-type\";\nlet inicialState = {\n  allFood: [],\n  allFoodCopy: [],\n  allFoodFilter: [],\n  details: [],\n  diets: [],\n  numPage: 1,\n  currentPage: 0\n};\nfunction rootReducer(state = inicialState, action) {\n  switch (action.type) {\n    case GET_USER:\n      return {\n        ...state,\n        allFood: [...action.payload].splice(0, 9),\n        allFoodCopy: action.payload,\n        allFoodFilter: action.payload\n      };\n      break;\n    case PAGINATE:\n      const next_page = state.currentPage + 1;\n      const prev_page = state.currentPage - 1;\n      const firstIndex = action.payload === \"next\" ? next_page * 9 : prev_page * 9;\n      if (action.payload === \"next\" && firstIndex >= state.allFoodFilter.length) {\n        return [...state];\n      } else if (action.payload === \"prev\" && prev_page < 0) {\n        return [...state];\n      }\n      return {\n        ...state,\n        allFood: [...state.allFoodFilter].splice(firstIndex, 9),\n        currentPage: action.payload === \"next\" ? next_page : prev_page\n      };\n    case ORDER:\n      if (action.payload === \"az\") {\n        const allFoodOrder = [...state.allFoodCopy].sort((prev, next) => {\n          if (prev.title > next.title) return 1;\n          if (prev.title < next.title) return -1;\n          return 0;\n        });\n        return {\n          ...state,\n          allFood: [...allFoodOrder].slice(0, 9),\n          allFoodFilter: allFoodOrder,\n          currentPage: 0\n        };\n      } else if (action.payload === \"za\") {\n        const allFoodOrder = [...state.allFoodCopy].sort((prev, next) => {\n          if (prev.title > next.title) return -1;\n          if (prev.title < next.title) return 1;\n          return 0;\n        });\n        return {\n          ...state,\n          allFood: [...allFoodOrder].slice(0, 9),\n          allFoodFilter: allFoodOrder,\n          currentPage: 0\n        };\n      }\n    case GET_BY_ID:\n      return {\n        ...state,\n        details: action.payload\n      };\n    case ORDER_BY_SOURCE:\n      let fromApi = state.allFoodCopy.filter(allFoods => !isNaN(+allFoods.id));\n      let fromBDD = state.allFoodCopy.filter(allFoods => isNaN(+allFoods.id));\n      let all = state.allFoodCopy;\n      if (action.payload === \"API\") {\n        return {\n          ...state,\n          allFood: fromApi.slice(0, 9),\n          allFoodFilter: fromApi\n        };\n      } else if (action.payload === \"BDD\") {\n        return {\n          ...state,\n          allFood: fromBDD.slice(0, 9),\n          allFoodFilter: fromBDD\n        };\n      } else if (action.payload === \"All\") {\n        return {\n          ...state,\n          allFood: all.slice(0, 9),\n          allFoodFilter: all\n        };\n      }\n    case HANDLE_NUMBER:\n      return {\n        ...state,\n        numPage: action.payload,\n        currentPage: 0\n      };\n    case GET_BY_NAME:\n      return {\n        ...state,\n        allFood: action.payload\n      };\n    case GET_TYPE_DIETS:\n      return {\n        ...state,\n        diets: action.payload\n      };\n    case ORDER_BY_PUNTUATION:\n      let orderpunt = action.payload === \"menormayor\" ? state.allFoodCopy.sort(function (a, b) {\n        if (a.healthScore > b.healthScore) {\n          return 1;\n        }\n        if (b.healthScore > a.healthScore) {\n          return -1;\n        }\n        return 0;\n      }) : state.allFoodCopy.sort(function (a, b) {\n        if (a.healthScore > b.healthScore) {\n          return -1;\n        }\n        if (b.healthScore > a.healthScore) {\n          return 1;\n        }\n        return 0;\n      });\n      return {\n        ...state,\n        allFood: orderpunt.slice(0, 9),\n        allFoodFilter: orderpunt\n      };\n    case FILTER_BY_TYPEDIET:\n      const allRec = state.allFoodCopy;\n      const typeDietFilter = action.payload === \"All\" ? allRec : allRec.filter(recipe => recipe.diets.some(diet => diet.name === action.payload));\n      return {\n        ...state,\n        allFood: typeDietFilter.slice(0, 9),\n        allFoodFilter: typeDietFilter\n      };\n    default:\n      return state;\n      break;\n  }\n}\nexport default rootReducer;","map":{"version":3,"names":["FILTER_BY_TYPEDIET","GET_BY_ID","GET_BY_NAME","GET_TYPE_DIETS","GET_USER","HANDLE_NUMBER","ORDER","ORDER_BY_PUNTUATION","ORDER_BY_SOURCE","PAGINATE","inicialState","allFood","allFoodCopy","allFoodFilter","details","diets","numPage","currentPage","rootReducer","state","action","type","payload","splice","next_page","prev_page","firstIndex","length","allFoodOrder","sort","prev","next","title","slice","fromApi","filter","allFoods","isNaN","id","fromBDD","all","orderpunt","a","b","healthScore","allRec","typeDietFilter","recipe","some","diet","name"],"sources":["C:/Users/usuario/Desktop/PI-Food/client/src/redux/reducer/reducer.js"],"sourcesContent":["import { FILTER_BY_TYPEDIET, GET_BY_ID, GET_BY_NAME, GET_TYPE_DIETS, GET_USER, HANDLE_NUMBER, ORDER, ORDER_BY_PUNTUATION, ORDER_BY_SOURCE, PAGINATE } from \"../action/action-type\";\r\n\r\nlet inicialState = {\r\n    allFood: [],\r\n    allFoodCopy: [],\r\n    allFoodFilter: [],\r\n    details: [],\r\n    diets: [],\r\n    numPage: 1,\r\n    currentPage: 0,\r\n}\r\n\r\n\r\nfunction rootReducer(state = inicialState, action) {\r\n    switch (action.type) {\r\n        case GET_USER:\r\n            return {\r\n                ...state,\r\n                allFood: [...action.payload].splice(0, 9),\r\n                allFoodCopy: action.payload,\r\n                allFoodFilter: action.payload\r\n            }\r\n            break;\r\n\r\n        case PAGINATE:\r\n            const next_page = state.currentPage + 1;\r\n            const prev_page = state.currentPage - 1;\r\n            const firstIndex = action.payload === \"next\" ? next_page * 9 : prev_page * 9;\r\n            if (action.payload === \"next\" && firstIndex >= state.allFoodFilter.length) { return [...state] }\r\n            else if (action.payload === \"prev\" && prev_page < 0) { return [...state] }\r\n\r\n            return {\r\n                ...state,\r\n                allFood: [...state.allFoodFilter].splice(firstIndex, 9),\r\n                currentPage: action.payload === \"next\" ? next_page : prev_page\r\n\r\n            }\r\n\r\n        case ORDER:\r\n            if (action.payload === \"az\") {\r\n                const allFoodOrder = [...state.allFoodCopy].sort((prev, next) => {\r\n                    if (prev.title > next.title) return 1\r\n                    if (prev.title < next.title) return -1\r\n                    return 0\r\n                })\r\n                return {\r\n                    ...state,\r\n                    allFood: [...allFoodOrder].slice(0, 9),\r\n                    allFoodFilter: allFoodOrder,\r\n                    currentPage: 0\r\n                }\r\n            } else if (action.payload === \"za\") {\r\n                const allFoodOrder = [...state.allFoodCopy].sort((prev, next) => {\r\n                    if (prev.title > next.title) return -1\r\n                    if (prev.title < next.title) return 1\r\n                    return 0\r\n                })\r\n                return {\r\n                    ...state,\r\n                    allFood: [...allFoodOrder].slice(0, 9),\r\n                    allFoodFilter: allFoodOrder,\r\n                    currentPage: 0\r\n                }\r\n            }\r\n\r\n\r\n        case GET_BY_ID:\r\n            return {\r\n                ...state,\r\n                details: action.payload,\r\n            };\r\n\r\n\r\n        case ORDER_BY_SOURCE:\r\n\r\n            let fromApi = state.allFoodCopy.filter((allFoods) => !isNaN(+allFoods.id));\r\n            let fromBDD = state.allFoodCopy.filter((allFoods) => isNaN(+allFoods.id));\r\n            let all = state.allFoodCopy\r\n            if (action.payload === \"API\") {\r\n                return {\r\n                    ...state,\r\n                    allFood: fromApi.slice(0, 9),\r\n                    allFoodFilter: fromApi\r\n                };\r\n            } else if (action.payload === \"BDD\") {\r\n                return {\r\n                    ...state,\r\n                    allFood: fromBDD.slice(0, 9),\r\n                    allFoodFilter: fromBDD\r\n                };\r\n            } else if (action.payload === \"All\") {\r\n                return {\r\n                    ...state,\r\n                    allFood: all.slice(0, 9),\r\n                    allFoodFilter: all\r\n                };\r\n            }\r\n\r\n        case HANDLE_NUMBER:\r\n            return {\r\n                ...state,\r\n                numPage: action.payload,\r\n                currentPage: 0\r\n            };\r\n\r\n\r\n        case GET_BY_NAME:\r\n            return {\r\n                ...state,\r\n                allFood: action.payload,\r\n            };\r\n\r\n\r\n        case GET_TYPE_DIETS:\r\n            return {\r\n                ...state,\r\n                diets: action.payload,\r\n            };\r\n\r\n        case ORDER_BY_PUNTUATION:\r\n            let orderpunt =\r\n                action.payload === \"menormayor\"\r\n                    ? state.allFoodCopy.sort(function (a, b) {\r\n                        if (a.healthScore > b.healthScore) {\r\n                            return 1;\r\n                        }\r\n                        if (b.healthScore > a.healthScore) {\r\n                            return -1;\r\n                        }\r\n                        return 0;\r\n                    })\r\n                    : state.allFoodCopy.sort(function (a, b) {\r\n                        if (a.healthScore > b.healthScore) {\r\n                            return -1;\r\n                        }\r\n                        if (b.healthScore > a.healthScore) {\r\n                            return 1;\r\n                        }\r\n                        return 0;\r\n                    });\r\n            return {\r\n                ...state,\r\n                allFood: orderpunt.slice(0, 9),\r\n                allFoodFilter: orderpunt\r\n            };\r\n\r\n        case FILTER_BY_TYPEDIET:\r\n            const allRec = state.allFoodCopy;\r\n\r\n            const typeDietFilter = action.payload === \"All\"\r\n                ? allRec\r\n                : allRec.filter((recipe) =>\r\n                    recipe.diets.some((diet) => diet.name === action.payload)\r\n                );\r\n            return {\r\n                ...state,\r\n                allFood: typeDietFilter.slice(0, 9),\r\n                allFoodFilter: typeDietFilter\r\n            };\r\n\r\n        default:\r\n            return state\r\n            break;\r\n    }\r\n\r\n}\r\n\r\nexport default rootReducer;"],"mappings":"AAAA,SAASA,kBAAkB,EAAEC,SAAS,EAAEC,WAAW,EAAEC,cAAc,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,KAAK,EAAEC,mBAAmB,EAAEC,eAAe,EAAEC,QAAQ,QAAQ,uBAAuB;AAElL,IAAIC,YAAY,GAAG;EACfC,OAAO,EAAE,EAAE;EACXC,WAAW,EAAE,EAAE;EACfC,aAAa,EAAE,EAAE;EACjBC,OAAO,EAAE,EAAE;EACXC,KAAK,EAAE,EAAE;EACTC,OAAO,EAAE,CAAC;EACVC,WAAW,EAAE;AACjB,CAAC;AAGD,SAASC,WAAWA,CAACC,KAAK,GAAGT,YAAY,EAAEU,MAAM,EAAE;EAC/C,QAAQA,MAAM,CAACC,IAAI;IACf,KAAKjB,QAAQ;MACT,OAAO;QACH,GAAGe,KAAK;QACRR,OAAO,EAAE,CAAC,GAAGS,MAAM,CAACE,OAAO,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;QACzCX,WAAW,EAAEQ,MAAM,CAACE,OAAO;QAC3BT,aAAa,EAAEO,MAAM,CAACE;MAC1B,CAAC;MACD;IAEJ,KAAKb,QAAQ;MACT,MAAMe,SAAS,GAAGL,KAAK,CAACF,WAAW,GAAG,CAAC;MACvC,MAAMQ,SAAS,GAAGN,KAAK,CAACF,WAAW,GAAG,CAAC;MACvC,MAAMS,UAAU,GAAGN,MAAM,CAACE,OAAO,KAAK,MAAM,GAAGE,SAAS,GAAG,CAAC,GAAGC,SAAS,GAAG,CAAC;MAC5E,IAAIL,MAAM,CAACE,OAAO,KAAK,MAAM,IAAII,UAAU,IAAIP,KAAK,CAACN,aAAa,CAACc,MAAM,EAAE;QAAE,OAAO,CAAC,GAAGR,KAAK,CAAC;MAAC,CAAC,MAC3F,IAAIC,MAAM,CAACE,OAAO,KAAK,MAAM,IAAIG,SAAS,GAAG,CAAC,EAAE;QAAE,OAAO,CAAC,GAAGN,KAAK,CAAC;MAAC;MAEzE,OAAO;QACH,GAAGA,KAAK;QACRR,OAAO,EAAE,CAAC,GAAGQ,KAAK,CAACN,aAAa,CAAC,CAACU,MAAM,CAACG,UAAU,EAAE,CAAC,CAAC;QACvDT,WAAW,EAAEG,MAAM,CAACE,OAAO,KAAK,MAAM,GAAGE,SAAS,GAAGC;MAEzD,CAAC;IAEL,KAAKnB,KAAK;MACN,IAAIc,MAAM,CAACE,OAAO,KAAK,IAAI,EAAE;QACzB,MAAMM,YAAY,GAAG,CAAC,GAAGT,KAAK,CAACP,WAAW,CAAC,CAACiB,IAAI,CAAC,CAACC,IAAI,EAAEC,IAAI,KAAK;UAC7D,IAAID,IAAI,CAACE,KAAK,GAAGD,IAAI,CAACC,KAAK,EAAE,OAAO,CAAC;UACrC,IAAIF,IAAI,CAACE,KAAK,GAAGD,IAAI,CAACC,KAAK,EAAE,OAAO,CAAC,CAAC;UACtC,OAAO,CAAC;QACZ,CAAC,CAAC;QACF,OAAO;UACH,GAAGb,KAAK;UACRR,OAAO,EAAE,CAAC,GAAGiB,YAAY,CAAC,CAACK,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;UACtCpB,aAAa,EAAEe,YAAY;UAC3BX,WAAW,EAAE;QACjB,CAAC;MACL,CAAC,MAAM,IAAIG,MAAM,CAACE,OAAO,KAAK,IAAI,EAAE;QAChC,MAAMM,YAAY,GAAG,CAAC,GAAGT,KAAK,CAACP,WAAW,CAAC,CAACiB,IAAI,CAAC,CAACC,IAAI,EAAEC,IAAI,KAAK;UAC7D,IAAID,IAAI,CAACE,KAAK,GAAGD,IAAI,CAACC,KAAK,EAAE,OAAO,CAAC,CAAC;UACtC,IAAIF,IAAI,CAACE,KAAK,GAAGD,IAAI,CAACC,KAAK,EAAE,OAAO,CAAC;UACrC,OAAO,CAAC;QACZ,CAAC,CAAC;QACF,OAAO;UACH,GAAGb,KAAK;UACRR,OAAO,EAAE,CAAC,GAAGiB,YAAY,CAAC,CAACK,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;UACtCpB,aAAa,EAAEe,YAAY;UAC3BX,WAAW,EAAE;QACjB,CAAC;MACL;IAGJ,KAAKhB,SAAS;MACV,OAAO;QACH,GAAGkB,KAAK;QACRL,OAAO,EAAEM,MAAM,CAACE;MACpB,CAAC;IAGL,KAAKd,eAAe;MAEhB,IAAI0B,OAAO,GAAGf,KAAK,CAACP,WAAW,CAACuB,MAAM,CAAEC,QAAQ,IAAK,CAACC,KAAK,CAAC,CAACD,QAAQ,CAACE,EAAE,CAAC,CAAC;MAC1E,IAAIC,OAAO,GAAGpB,KAAK,CAACP,WAAW,CAACuB,MAAM,CAAEC,QAAQ,IAAKC,KAAK,CAAC,CAACD,QAAQ,CAACE,EAAE,CAAC,CAAC;MACzE,IAAIE,GAAG,GAAGrB,KAAK,CAACP,WAAW;MAC3B,IAAIQ,MAAM,CAACE,OAAO,KAAK,KAAK,EAAE;QAC1B,OAAO;UACH,GAAGH,KAAK;UACRR,OAAO,EAAEuB,OAAO,CAACD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;UAC5BpB,aAAa,EAAEqB;QACnB,CAAC;MACL,CAAC,MAAM,IAAId,MAAM,CAACE,OAAO,KAAK,KAAK,EAAE;QACjC,OAAO;UACH,GAAGH,KAAK;UACRR,OAAO,EAAE4B,OAAO,CAACN,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;UAC5BpB,aAAa,EAAE0B;QACnB,CAAC;MACL,CAAC,MAAM,IAAInB,MAAM,CAACE,OAAO,KAAK,KAAK,EAAE;QACjC,OAAO;UACH,GAAGH,KAAK;UACRR,OAAO,EAAE6B,GAAG,CAACP,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;UACxBpB,aAAa,EAAE2B;QACnB,CAAC;MACL;IAEJ,KAAKnC,aAAa;MACd,OAAO;QACH,GAAGc,KAAK;QACRH,OAAO,EAAEI,MAAM,CAACE,OAAO;QACvBL,WAAW,EAAE;MACjB,CAAC;IAGL,KAAKf,WAAW;MACZ,OAAO;QACH,GAAGiB,KAAK;QACRR,OAAO,EAAES,MAAM,CAACE;MACpB,CAAC;IAGL,KAAKnB,cAAc;MACf,OAAO;QACH,GAAGgB,KAAK;QACRJ,KAAK,EAAEK,MAAM,CAACE;MAClB,CAAC;IAEL,KAAKf,mBAAmB;MACpB,IAAIkC,SAAS,GACTrB,MAAM,CAACE,OAAO,KAAK,YAAY,GACzBH,KAAK,CAACP,WAAW,CAACiB,IAAI,CAAC,UAAUa,CAAC,EAAEC,CAAC,EAAE;QACrC,IAAID,CAAC,CAACE,WAAW,GAAGD,CAAC,CAACC,WAAW,EAAE;UAC/B,OAAO,CAAC;QACZ;QACA,IAAID,CAAC,CAACC,WAAW,GAAGF,CAAC,CAACE,WAAW,EAAE;UAC/B,OAAO,CAAC,CAAC;QACb;QACA,OAAO,CAAC;MACZ,CAAC,CAAC,GACAzB,KAAK,CAACP,WAAW,CAACiB,IAAI,CAAC,UAAUa,CAAC,EAAEC,CAAC,EAAE;QACrC,IAAID,CAAC,CAACE,WAAW,GAAGD,CAAC,CAACC,WAAW,EAAE;UAC/B,OAAO,CAAC,CAAC;QACb;QACA,IAAID,CAAC,CAACC,WAAW,GAAGF,CAAC,CAACE,WAAW,EAAE;UAC/B,OAAO,CAAC;QACZ;QACA,OAAO,CAAC;MACZ,CAAC,CAAC;MACV,OAAO;QACH,GAAGzB,KAAK;QACRR,OAAO,EAAE8B,SAAS,CAACR,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QAC9BpB,aAAa,EAAE4B;MACnB,CAAC;IAEL,KAAKzC,kBAAkB;MACnB,MAAM6C,MAAM,GAAG1B,KAAK,CAACP,WAAW;MAEhC,MAAMkC,cAAc,GAAG1B,MAAM,CAACE,OAAO,KAAK,KAAK,GACzCuB,MAAM,GACNA,MAAM,CAACV,MAAM,CAAEY,MAAM,IACnBA,MAAM,CAAChC,KAAK,CAACiC,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,IAAI,KAAK9B,MAAM,CAACE,OAAO,CAC5D,CAAC;MACL,OAAO;QACH,GAAGH,KAAK;QACRR,OAAO,EAAEmC,cAAc,CAACb,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QACnCpB,aAAa,EAAEiC;MACnB,CAAC;IAEL;MACI,OAAO3B,KAAK;MACZ;EACR;AAEJ;AAEA,eAAeD,WAAW"},"metadata":{},"sourceType":"module"}